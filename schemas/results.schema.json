{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Template Doctor Analysis Result",
  "type": "object",
  "required": ["repoUrl", "timestamp", "compliance"],
  "properties": {
    "repoUrl": {
      "type": "string",
      "format": "uri",
      "description": "The full URL of the analyzed repository"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when the analysis was run"
    },
    "compliance": {
      "type": "object",
      "required": ["issues", "compliant", "summary"],
      "properties": {
        "summary": {
          "type": "string",
          "description": "Overall compliance summary with percentage"
        },
        "issues": {
          "type": "array",
          "description": "List of issues found",
          "items": {
            "type": "object",
            "required": ["id", "severity", "message"],
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique identifier for the issue"
              },
              "severity": {
                "type": "string",
                "enum": ["info", "warning", "error"],
                "description": "Severity level of the issue"
              },
              "message": {
                "type": "string",
                "description": "Human-readable description of the issue"
              },
              "error": {
                "type": "string",
                "description": "Optional error message if the issue was due to an error reading a file"
              }
            }
          }
        },
        "compliant": {
          "type": "array",
          "description": "List of compliant items",
          "items": {
            "type": "object",
            "required": ["id", "category", "message"],
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique identifier for the compliant item"
              },
              "category": {
                "type": "string",
                "description": "Category of the compliant item (e.g., requiredFile, requiredFolder, readmeHeading, etc.)"
              },
              "message": {
                "type": "string",
                "description": "Human-readable description of the compliant item"
              },
              "details": {
                "type": "object",
                "description": "Additional details about the compliant item"
              }
            }
          }
        }
      }
    }
  }
}
